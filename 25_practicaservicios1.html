<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>Acceso Servicios Api Departamentos y Api Empleados</h1>
    <table border="1" id="tabladep">
        <thead>
            <tr>
                <td>NUMERO</td>
                <td>NOMBRE</td>
                <td>LOCALIDAD</td>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <script src="js/jquery-3.5.1.min.js"></script>
    <script>
        var urldep = "https://apicruddepartamentoscore.azurewebsites.net/";
        var urlemp = "https://apiempleadosspgs.azurewebsites.net/";
        $(document).ready(function () {
            var reqgetdep = "/api/departamentos";
            $.getJSON(urldep + reqgetdep, function (data) {
                $.each(data, function (index, dept) {
                    var tr = $("<tr>");
                    var tdnum = $("<td>", {
                        text: dept.numero
                    });
                    var tdnom = $("<td>");
                    var boton = $("<button>", {
                        type: "button"
                        , id: dept.numero
                        , text: dept.nombre
                    });
                    boton.click(function () {
                        var num = $(this).attr("id");
                        var reqgetemp = "api/Empleados/EmpleadosDepartamento/" + num;
                        $.getJSON(urlemp + reqgetemp, function () {
                            var html = "<table border='1' id='tablaemp'>"
                                + "<thead><tr><td>IdEmpleado</td><td>Apellido</td>"
                                + "<td>Oficio</td><td>Salario</td></thead><tbody></tbody></table>";
                            $(document).html(html);
                            $.each(data, function (index, emp) {
                                console.log(emp.idempleado);
                                //var tr = $("<tr>");
                                //var tdid = $("<td>", {
                                //    text: emp.idEmpleado
                                //});
                                //var tdape = $("<td>", {
                                //    text: emp.apellido
                                //});
                                //var tdofi = $("<td>", {
                                //    text: emp.oficio
                                //});
                                //var tdsal = $("<td>", {
                                //    text: emp.salario
                                //});
                                //tr.append(tdid).append(tdape).append(tdofi).append(tdsal);
                                //$("#tablaemp tbody").append(tr);
                            });
                        });
                    });
                    tdnom.append(boton);
                    var tdloc = $("<td>", {
                        text: dept.localidad
                    });
                    tr.append(tdnum).append(tdnom).append(tdloc);
                    $("#tabladep tbody").append(tr);
                });
            });
        });
    </script>
</body>
</html>